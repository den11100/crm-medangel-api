# üìò API:  –ú–µ–¥–∞–Ω–≥–µ–ª - CRM
–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown, –≤ –æ–¥–Ω–æ–º —Ü–µ–ª—å–Ω–æ–º –±–ª–æ–∫–µ –±–µ–∑ —Ä–∞–∑–±–∏–≤–∫–∏ –ø–æ —á–∞—Å—Ç—è–º.

## üì¶ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

API –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP —Å—Ç–∞—Ç—É—Å **200 OK**, –¥–∞–∂–µ –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.  
–ü—Ä–æ–≤–µ—Ä–∫—É —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ –ø–æ–ª—é `status` –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç–∞:

- `"status": "success"` ‚Äî –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.
- `"status": "fail"` ‚Äî –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ–ª—è—Ö `error` –∏ `code`.

> ‚ö†Ô∏è –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π HTTP –º–µ—Ç–æ–¥) –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ–∑–≤—Ä–∞—â—ë–Ω 400 Bad Request –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –æ—à–∏–±–∫–∏.

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –º–µ—Ç–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:

X-Api-Key: {your_api_key}

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º API-–∫–ª—é—á–µ:
```json
{
  "status": "fail",
  "error": "–ù–µ –≤–µ—Ä–Ω—ã–π API –∫–ª—é—á",
  "code": 2
}
```


## –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –æ –∑–∞–ø–∏—Å–∏ (–ó–∞–Ω—è—Ç—å —Å–ª–æ—Ç)

### POST `/api/medangel/schedule/reserve-slot`

### –û–ø–∏—Å–∞–Ω–∏–µ

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–Ω—è—Ç—å —Å–ª–æ—Ç. –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (JSON —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞)

| –ü–∞—Ä–∞–º–µ—Ç—Ä        | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
|-----------------|---------|--------------------------------------------|
| med_doctor_id   | int     | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –í—Ä–∞—á–∞ –∏–∑ –ú–µ–¥–∞–Ω–≥–µ–ª |
| med_analysis_ids| array   | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –£—Å–ª—É–≥ –∏–∑ –ú–µ–¥–∞–Ω–≥–µ–ª|
| dt              | string  | –î–∞—Ç–∞ –ø—Ä–∏—ë–º–∞ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ 2025-05-30)         |
| time_start      | string  | –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ (—Ñ–æ—Ä–º–∞—Ç 15:00:00)             |
| time_end        | string  | –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è (—Ñ–æ—Ä–º–∞—Ç 15:30:00)          |
| `p_email`       | string  | Email –ø–∞—Ü–∏–µ–Ω—Ç–∞                             |
| `p_family`      | string  | –§–∞–º–∏–ª–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞                           |
| `p_name`        | string  | –ò–º—è –ø–∞—Ü–∏–µ–Ω—Ç–∞                               |
| `p_sex`         | int     | –ü–æ–ª –ø–∞—Ü–∏–µ–Ω—Ç–∞ (1 - –ú; 2 - –ñ)                |
| `p_phone`       | string  | (—Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã)                             |

#### –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

| –ö–ª—é—á                | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
|---------------------|---------|----------------------------------------------------|
| `p_patronymic`      | string  | –û—Ç—á–µ—Å—Ç–≤–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞                                  |
| `p_birth`           | string  | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `1980-12-30`               |

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "med_doctor_id": 3,
  "med_analysis_ids": [25,24],
  "dt": "2025-05-21",
  "time_start": "08:00:00",
  "time_end": "08:30:00",
  "p_email": "patient@example.com",
  "p_family": "–ò–≤–∞–Ω–æ–≤",
  "p_name": "–ò–≤–∞–Ω", 
  "p_patronymic": "–ò–≤–∞–Ω–æ–≤–∏—á",
  "p_sex": 1,
  "p_phone": "79001234567",
  "p_birth": "1980-12-30",
}
```

#### –û—Ç–≤–µ—Ç 200 –û–ö
```json
{
    "status": "success",
    "data": {
        "crm_appointment_id": 98435
    }
}
```

### –û—à–∏–±–∫–∏ –û—Ç–≤–µ—Ç 200 –û–ö
```json
{
    "status": "fail",
    "error": "–î–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è —É–∂–µ –∑–∞–Ω—è—Ç–æ.",
    "code": 13
}
```




# üßæ –ö–æ–¥—ã –æ—à–∏–±–æ–∫ API

–û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –≤ –ø–æ–ª–µ `code` –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ `"fail"`:

| –ö–æ–¥ | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞                     | –û–ø–∏—Å–∞–Ω–∏–µ                                                         |
|-----|-------------------------------|------------------------------------------------------------------|
| 2   | `CODE_BAD_API`                | –ù–µ–≤–µ—Ä–Ω—ã–π API-–∫–ª—é—á. –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø—Ä–æ—à—ë–ª –ø—Ä–æ–≤–µ—Ä–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.        |
| 8   | `CODE_NOT_FOUND`              | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç  –Ω–µ –Ω–∞–π–¥–µ–Ω.                                 |
| 9   | `CODE_INVALID_FORMAT`         | –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON.  |
| 10  | `CODE_REQUIRED_PARAM`         | –ù–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.                      |
| 11  | `CODE_ALREADY_EXIST`          | –û–±—ä–µ–∫—Ç —Å —Ç–∞–∫–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç .                        |
| 12  | `CODE_VALIDATION`             | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ ‚Äî –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–ª–∏ –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.      |
| 13  | `CODE_VALIDATION_OR_NO_VACANT`| –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ –∏–ª–∏ —Å–ª–æ—Ç –∑–∞–Ω—è—Ç                           |
